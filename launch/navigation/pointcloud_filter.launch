<launch>

  <!-- remapping args-->
  <arg name="namespace" default="" />
  <arg name="input_cloud" default="/head_camera/depth_downsample/points" />
  <arg name="output_cloud" default="/head_camera/depth_downsample/points_filtered" />
  
  <group if="$(eval not namespace)">
    <!-- Start a nodelet manager-->

    <!-- Run a passthrough filter to clean the input pointcloud -->
    <node pkg="nodelet" type="nodelet" name="outlier_removal" args="standalone pcl/StatisticalOutlierRemoval">
      <remap from="~input" to="$(arg input_cloud)" />
      <remap from="~output" to="$(arg output_cloud)" />
      <rosparam>
        mean_k: 8
        stddev: 1
      </rosparam>
    </node>
  </group>

  <group unless="$(eval not namespace)" ns="$(arg namespace)">
    <!-- Start a nodelet manager-->
    <node pkg="nodelet" type="nodelet" name="pcl_manager" args="manager"/>

    <!-- Run a passthrough filter to clean the input pointcloud -->
    <node pkg="nodelet" type="nodelet" name="outlier_removal" args="load pcl/StatisticalOutlierRemoval pcl_manager">
      <remap from="~input" to="$(arg input_cloud)" />
      <remap from="~output" to="$(arg output_cloud)" />
      <rosparam>
        mean_k: 8
        stddev: 1
      </rosparam>
    </node>
  </group>
  
</launch>